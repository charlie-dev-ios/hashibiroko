# Feature Specification: 料理コンテンツページ実装

**Feature Branch**: `002-recipe-content`
**Created**: 2026-01-04
**Status**: Draft
**Input**: User description: "料理のコンテンツを実装してください。料理ページは以下で構成されます。1. 種別選択（カレー・シチュー、サラダ、デザート）、2. 食材フィルター 3. 料理一覧。料理一覧は料理をそれぞれカードで表示します。料理カードの内容は下記の通りです。0. 料理の画像 1. 料理名 2. エナジー 3. 必要食材の列挙 4. 必要食材の総数"

## User Scenarios & Testing *(mandatory)*

### User Story 1 - すべての料理を一覧表示（デフォルト状態） (Priority: P1)

ユーザーは料理ページにアクセスすると、フィルター未設定のデフォルト状態で、すべての料理が一覧表示される。各料理はカード形式で表示され、料理の画像、名前、エナジー、必要食材の列挙、必要食材の総数が含まれる。

**Why this priority**: これが最優先事項。ユーザーがページを開いた瞬間に料理情報を閲覧できることが必須。フィルター機能がなくても、この基本機能だけで料理カタログとしての価値を提供でき、真の MVP として成立する。

**Independent Test**: 料理ページを開くだけで、すべての料理カードが表示されることで独立してテスト可能。フィルター機能は不要。

**Acceptance Scenarios**:

1. **Given** システムに料理データが登録されている状態、**When** ユーザーが料理ページにアクセス、**Then** すべての料理がカード形式で一覧に表示される
2. **Given** ユーザーが料理ページにアクセスした状態、**When** 各料理カードを確認、**Then** 料理画像、料理名、エナジー、必要食材の列挙、必要食材の総数が正しく表示される
3. **Given** フィルターが設定されていない状態、**When** ページをリロード、**Then** すべての料理が再び表示される

---

### User Story 2 - 料理種別で絞り込み (Priority: P2)

ユーザーは料理ページで、料理の種別（カレー・シチュー、サラダ、デザート）を選択し、その種別に該当する料理のみを一覧に表示できる。フィルターを解除すると、再びすべての料理が表示される。

**Why this priority**: P1 の次の優先事項として、フィルター機能による絞り込みを提供。種別による分類は料理を探す上で最も一般的な方法。

**Independent Test**: 料理ページで種別選択ボタンをクリックし、該当する料理カードのみが表示され、フィルター解除ですべてに戻ることで独立してテスト可能。

**Acceptance Scenarios**:

1. **Given** すべての料理が表示されている状態、**When** 「カレー・シチュー」種別を選択、**Then** カレー・シチュー種別の料理カードのみが一覧に表示される
2. **Given** すべての料理が表示されている状態、**When** 「サラダ」種別を選択、**Then** サラダ種別の料理カードのみが一覧に表示される
3. **Given** すべての料理が表示されている状態、**When** 「デザート」種別を選択、**Then** デザート種別の料理カードのみが一覧に表示される
4. **Given** 種別フィルターが適用されている状態、**When** フィルターを解除、**Then** すべての料理カードが再び表示される

---

### User Story 3 - 食材で料理を絞り込み (Priority: P3)

ユーザーは料理ページで、特定の食材を選択し、その食材を使用する料理のみを一覧に表示できる。フィルターを解除すると、再びすべての料理が表示される。

**Why this priority**: 食材フィルターは、ユーザーが手持ちの食材で作れる料理を探す際に有用だが、種別フィルターより使用頻度は低いため P3。

**Independent Test**: 料理ページで食材フィルターを開き、特定の食材を選択し、その食材を含む料理カードのみが表示され、フィルター解除ですべてに戻ることで独立してテスト可能。

**Acceptance Scenarios**:

1. **Given** すべての料理が表示されている状態、**When** 食材フィルターで特定の食材を1つ選択、**Then** その食材を必要とする料理カードのみが一覧に表示される
2. **Given** すべての料理が表示されている状態、**When** 食材フィルターで複数の食材を選択、**Then** 選択したすべての食材を含む料理カードのみが一覧に表示される
3. **Given** 食材フィルターが適用されている状態、**When** 食材フィルターを解除、**Then** すべての料理カードが再び表示される

---

### User Story 4 - 種別と食材の複合フィルター (Priority: P4)

ユーザーは料理ページで、種別選択と食材フィルターを組み合わせて、より精密に料理を絞り込むことができる。例えば、「サラダ」種別かつ「トマト」を含む料理のみを表示する。

**Why this priority**: 種別と食材の組み合わせは高度な検索機能。P1〜P3 が実装されていれば基本的な料理探しは十分可能なため、ユーザー体験向上のための追加機能として位置付け。

**Independent Test**: 種別を選択し、さらに食材フィルターを適用し、両方の条件を満たす料理カードのみが表示されることで独立してテスト可能。

**Acceptance Scenarios**:

1. **Given** すべての料理が表示されている状態、**When** 「デザート」種別を選択し、さらに食材フィルターで「リンゴ」を選択、**Then** デザート種別でリンゴを必要とする料理カードのみが表示される
2. **Given** 種別と食材フィルターが両方適用されている状態、**When** 種別選択を解除、**Then** 食材フィルターのみが適用された料理カードが表示される
3. **Given** 種別と食材フィルターが両方適用されている状態、**When** 食材フィルターを解除、**Then** 種別選択のみが適用された料理カードが表示される
4. **Given** 種別と食材フィルターが両方適用されている状態、**When** 両方のフィルターを解除、**Then** すべての料理カードが再び表示される

---

### Edge Cases

- 選択した種別または食材に該当する料理が0件の場合、どのようなメッセージを表示するか？（推奨: 「該当する料理が見つかりません」などの空状態メッセージ）
- 料理画像が存在しない場合、どのように表示するか？（推奨: プレースホルダー画像を表示）
- 食材フィルターで選択可能な食材が非常に多い場合、どのように表示するか？（推奨: 検索機能付きドロップダウンまたはチェックボックスリスト）
- 必要食材の総数が0の場合、どのように表示するか？（推奨: 「0個」と表示、または空文字）

## Requirements *(mandatory)*

### Functional Requirements

- **FR-001**: システムはフィルターが設定されていない場合（デフォルト状態）、すべての料理を一覧に表示しなければならない
- **FR-002**: システムは料理一覧を料理カード形式で表示しなければならない
- **FR-003**: 料理カードには料理の画像、料理名、エナジー、必要食材の列挙、必要食材の総数を表示しなければならない
- **FR-004**: システムは料理ページに種別選択UI（カレー・シチュー、サラダ、デザート）を表示しなければならない
- **FR-005**: システムは種別選択に応じて、該当する料理のみを一覧に表示しなければならない
- **FR-006**: システムは料理ページに食材フィルターUIを表示しなければならない
- **FR-007**: システムは食材フィルターで選択された食材を含む料理のみを一覧に表示しなければならない
- **FR-008**: システムは種別選択と食材フィルターを組み合わせた絞り込みをサポートしなければならない
- **FR-009**: システムはフィルター解除時に、すべての料理を再表示しなければならない
- **FR-010**: システムは料理データに、料理名、種別、エナジー、必要食材のリスト、料理画像URLを含まなければならない
- **FR-011**: システムは絞り込み条件に該当する料理が0件の場合、ユーザーにその旨を通知しなければならない
- **FR-012**: システムは料理画像が存在しない場合、プレースホルダー画像を表示しなければならない

### Key Entities

- **Recipe（料理）**: 料理に関する情報を表すエンティティ
  - 料理名（例: 「カレーライス」「フルーツサラダ」）
  - 種別（カレー・シチュー、サラダ、デザート）
  - エナジー（数値: 例 1000、2500）
  - 必要食材のリスト（食材エンティティとの関連）
  - 必要食材の総数（数値: 例 5個、10個）
  - 料理画像URL（オプション）

- **Ingredient（食材）**: 料理に必要な食材を表すエンティティ
  - 食材名（例: 「トマト」「リンゴ」「とり肉」）
  - 食材画像URL（オプション）

- **RecipeIngredient（料理-食材関連）**: 料理と食材の関連を表すエンティティ
  - 料理ID
  - 食材ID
  - 必要数量（数値: 例 2個、5個）

## Success Criteria *(mandatory)*

### Measurable Outcomes

- **SC-001**: ユーザーは料理ページにアクセスしてから3秒以内に料理一覧を閲覧できる
- **SC-002**: ユーザーは種別選択後、1秒以内に絞り込まれた料理一覧を確認できる
- **SC-003**: ユーザーは食材フィルター適用後、1秒以内に絞り込まれた料理一覧を確認できる
- **SC-004**: ユーザーの90%以上が、料理カードから料理の基本情報（名前、エナジー、必要食材）を正しく理解できる
- **SC-005**: ユーザーは100件以上の料理データに対してもスムーズに絞り込みを実行できる

## Assumptions

- 料理データは事前に用意されており、システムが読み込み可能な形式（例: JSON、データベース）で保存されていることを前提とする
- 料理画像は外部URL、または静的アセットとして提供されることを前提とする
- 食材フィルターで選択可能な食材は、システムに登録されているすべての食材から選択できることを前提とする
- 種別は3種類（カレー・シチュー、サラダ、デザート）に限定されることを前提とする
- ユーザーは料理ページにアクセスする際、特定の認証や権限を必要としない（公開ページ）ことを前提とする

## Dependencies

- 料理データ（レシピデータ）のスキーマ定義が事前に完了していること
- 食材データ（Ingredientデータ）のスキーマ定義が事前に完了していること
- 料理と食材の関連データ（RecipeIngredientデータ）のスキーマ定義が事前に完了していること

## Out of Scope

- 料理詳細ページの実装（料理カードをクリックした際の詳細表示）は本フェーズには含まれない
- 料理のお気に入り登録機能は本フェーズには含まれない
- 料理のソート機能（エナジー順、名前順など）は本フェーズには含まれない
- 料理データの作成・編集・削除機能（管理機能）は本フェーズには含まれない
